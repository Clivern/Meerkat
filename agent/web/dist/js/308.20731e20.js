"use strict";(self["webpackChunkweb"]=self["webpackChunkweb"]||[]).push([[308],{1308:function(e,s,t){t.r(s),t.d(s,{default:function(){return n}});var r=function(){var e=this,s=e._self._c;return s("div",{staticClass:"columns is-desktop is-centered"},[s("div",{staticClass:"column is-4"},[s("br"),s("img",{attrs:{alt:"logo",src:t(6949),width:"200"}}),s("br"),s("br"),s("b-field",{attrs:{label:"Email"}},[s("b-input",{attrs:{placeholder:"mandrill@clivern.com",rounded:""},model:{value:e.form.email,callback:function(s){e.$set(e.form,"email",s)},expression:"form.email"}})],1),s("b-field",{attrs:{label:"Password"}},[s("b-input",{attrs:{type:"password","password-reveal":"",rounded:""},model:{value:e.form.password,callback:function(s){e.$set(e.form,"password",s)},expression:"form.password"}})],1),s("div",{staticClass:"field"},[s("p",{staticClass:"control"},[s("b-button",{attrs:{type:"submit is-danger is-light",disabled:e.form.button_disabled},on:{click:e.loginEvent}},[e._v("Login")])],1)])],1)])},o=[],a=(t(560),{name:"LoginPage",data(){return{form:{email:"",password:"",button_disabled:!1},loader:{isFullPage:!0,ref:null}}},methods:{loading(){this.loader.ref=this.$buefy.loading.open({container:this.loader.isFullPage?null:this.$refs.element.$el})},loginEvent(){this.form.button_disabled=!0,this.$store.dispatch("user/authAction",{email:this.form.email,password:this.form.password}).then((()=>{this.$buefy.toast.open({message:"You logged in successfully",type:"is-success"});let e=this.$store.getters["user/getAuth"].user_id,s=this.$store.getters["user/getAuth"].email,t=this.$store.getters["user/getAuth"].api_key,r=this.$store.getters["user/getAuth"].user_uuid,o=this.$store.getters["user/getAuth"].name,a=this.$store.getters["user/getAuth"].session_id,i=this.$store.getters["user/getAuth"].session_uuid,l=this.$store.getters["user/getAuth"].role;localStorage.setItem("x_user_id",e),localStorage.setItem("x_user_email",s),localStorage.setItem("x_api_key",t),localStorage.setItem("x_user_uuid",r),localStorage.setItem("x_user_name",o),localStorage.setItem("x_session_id",a),localStorage.setItem("x_session_uuid",i),localStorage.setItem("x_user_role",l),this.$router.push("/admin/dashboard")}),(e=>{e.response.data.errorMessage?this.$buefy.toast.open({message:e.response.data.errorMessage,type:"is-danger"}):this.$buefy.toast.open({message:"Oops! Something Goes Wrong!",type:"is-danger"}),this.form.button_disabled=!1}))}},mounted(){this.$emit("refresh-state"),this.loading(),this.$store.dispatch("health/fetchReadiness").then((()=>{this.loader.ref.close()}),(()=>{this.$router.push("/install"),this.loader.ref.close()}))}}),i=a,l=t(1001),u=(0,l.Z)(i,r,o,!1,null,null,null),n=u.exports},6949:function(e,s,t){e.exports=t.p+"img/logo.8dda3450.png"}}]);
//# sourceMappingURL=308.20731e20.js.map